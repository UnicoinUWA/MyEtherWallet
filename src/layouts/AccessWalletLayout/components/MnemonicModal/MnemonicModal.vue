<template>
  <b-modal
    ref="mnemonicPhrase"
    :title="$t('accessWallet.accessByMnemonicPhrase')"
    hide-footer
    class="bootstrap-modal padding-20 modal-metamask"
    centered>

    <div class="mnemonic-modal-content">
    <div class="contents">
      <p class="instruction">{{ $t("accessWallet.pleaseTypeInMnemonicPhrase") }}</p>
      <div class="tools">
        <div class="value-switch noselect">
          <div class="sliding-switch">
            <label class="switch">
              <input type="checkbox" v-model="mnemonic24">
              <span
                class="slider round"
                @click="mnemonicValueBitSizeChange"/>
            </label>
            <div class="labels">
              <span :class="[!mnemonic24 ? 'white' : '', 'label-left']">12</span>
              <span :class="[mnemonic24 ? 'white' : '', 'label-right']">24</span>
            </div>
          </div>
          <span class="text__base link switch-label">{{ $t("createWallet.byMnemonicValue") }}</span>
        </div>

      </div>
      <div class="phrases">
        <ul>
          <li
            v-for="index in mnemonicSize"
            :key="index">
            <span>{{ index }}.</span><input
              :id="'word' + (index - 1)"
              v-model="mnemonicPhrase[index - 1]"
              type="text"
              name="">
          </li>
        </ul>
      </div>
      </div>

      <div class="button-container">
        <standard-button
          @click="openPasswordModal"
        >
          {{ $t("common.continue") }}
        </standard-button>
        <!--<standard-button-->
          <!--:options="buttonDisabled"-->
        <!--/>-->

        <!--
        <b-btn
          class="mid-round-button-green-filled close-button"
          @click="openPasswordModal">
          {{ $t("common.continue") }}
        </b-btn>
      -->
      </div>
      <customer-support/>
    </div><!-- .mnemonic-modal-content -->
  </b-modal>
</template>

<script>
import CustomerSupport from '@/components/CustomerSupport';

export default {
  components: {
    'customer-support': CustomerSupport
  },
  props: {
    mnemonicPhrasePasswordModalOpen: {
      type: Function,
      default: function() {}
    }
  },
  data() {
    return {
      mnemonicPhrase: new Array(this.mnemonicSize).fill(''),
      mnemonic24: false,
      mnemonicSize: 12
    };
  },
  mounted() {
    //this.$refs.mnemonicPhrase.show();
  },
  methods: {
    mnemonicValueBitSizeChange() {
      this.mnemonic24 = !this.mnemonic24;
      this.mnemonic24 ? (this.mnemonicSize = 24) : (this.mnemonicSize = 12);
      this.mnemonicPhrase = new Array(this.mnemonicSize).fill('');
    },
    openPasswordModal() {
      this.mnemonicPhrasePasswordModalOpen(this.mnemonicPhrase.join(' '));
    }
  },
  watch: {
    mnemonicPhrase(newVal) {
      if (newVal[0] !== ' ' && newVal[0].indexOf(' ') >= 0) {
        if (
          newVal[0].split(' ').length === 12 ||
          newVal[0].split(' ').length === 24
        ) {
          this.mnemonic24 = newVal[0].split(' ').length === 24;
          this.mnemonicSize = newVal[0].split(' ').length;
          this.mnemonicPhrase = newVal[0].split(' ');
        }
      }
    }
  }
};
</script>
<style lang="scss" scoped>
@import 'MnemonicModal-desktop.scss';
@import 'MnemonicModal-tablet.scss';
@import 'MnemonicModal-mobile.scss';
</style>
